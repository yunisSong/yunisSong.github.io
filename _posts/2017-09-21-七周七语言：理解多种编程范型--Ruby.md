---
layout:     post
title:      七周七语言：理解多种编程范型--Ruby
subtitle:   在不断填坑中前进。。
date:       2017-09-21
author:     三十一
header-img: img/post-bg-nextgen-web-pwa.jpg
header-mask: 0.3
catalog:    true
tags:
   - 内功
   - 七周七语言
---

# 七周七语言：理解多种编程范型--Ruby

* 无论用哪一类语言，都必须全面、透彻地理解集合。
* 当你新接触一门语言的时候，有些问题是需要首先去思考的，“这门语言的编程模型是什么”


### Ruby
#### 基本语法
解释型， 意味着Ruby代码由解释器而非编译器执行。
动态类型，意味着类型在运行时而非编译时绑定。
尽管从执行速度上说，Ruby 谈不上有多高效，但它却能让程序员的编程效率大幅提高。
在Ruby中，一切皆 为对象，就连每个单独的数字也不例外。

```Ruby
irb(main):009:0> 4.class
=> Integer
irb(main):011:0> 4.methods
=> [:%, :&, :*, :+, :-, :/, :<, :>, :^, :|, :~, :-@, :**, :<=>, :<<, :>>, :<=, :>=, :==, :===, :[], :inspect, :size, :succ, :to_int, :to_s, :to_i, :to_f, :next, :div, :upto, :chr, :ord, :coerce, :divmod, :fdiv, :modulo, :remainder, :abs, :magnitude, :integer?, :floor, :ceil, :round, :truncate, :odd?, :even?, :downto, :times, :pred, :bit_length, :digits, :to_r, :numerator, :denominator, :rationalize, :gcd, :lcm, :gcdlcm, :+@, :eql?, :singleton_method_added, :i, :real?, :zero?, :nonzero?, :finite?, :infinite?, :step, :positive?, :negative?, :quo, :arg, :rectangular, :rect, :polar, :real, :imaginary, :imag, :abs2, :angle, :phase, :conjugate, :conj, :to_c, :between?, :clamp, :instance_of?, :kind_of?, :is_a?, :tap, :public_send, :remove_instance_variable, :singleton_method, :instance_variable_set, :define_singleton_method, :method, :public_method, :extend, :to_enum, :enum_for, :=~, :!~, :respond_to?, :freeze, :object_id, :send, :display, :nil?, :hash, :class, :singleton_class, :clone, :dup, :itself, :taint, :tainted?, :untaint, :untrust, :untrusted?, :trust, :frozen?, :methods, :singleton_methods, :protected_methods, :private_methods, :public_methods, :instance_variable_get, :instance_variables, :instance_variable_defined?, :!, :!=, :__send__, :equal?, :instance_eval, :instance_exec, :__id__]
irb(main):018:0> 4.to_f
=> 4.0
irb(main):027:0> false.class
=> FalseClass
irb(main):028:0> true.class
=> TrueClass
```


```Ruby
irb(main):002:0> x = 4
=> 4
irb(main):003:0> puts "判断语句" if x == 4
判断语句
=> nil
irb(main):004:0> puts "判断语句" unless x == 4
=> nil
irb(main):005:0> puts "判断语句" unless x == 5
判断语句
=> nil
```


```Ruby
irb(main):006:0> x = x + 2 while x < 10
=> nil
irb(main):007:0> x
=> 10


irb(main):008:0> x = x - 1 until x == 1
=> nil
irb(main):009:0> x
=> 1
```


 除了 `nil` 和 `false` 之外，其他的都代表 `true` 。`0` 也是 `true` 
 除了 `nil` 和 `false` 之外，其他的都代表 `true` 。`0` 也是 `true` 
 除了 `nil` 和 `false` 之外，其他的都代表 `true` 。`0` 也是 `true` 
 
`0` 也是 `true` 
`0` 也是 `true` 
`0` 也是 `true` 


`and` 等同于 `&&`
`or` 等同于 `||`

直到真正尝试执代码时，`Ruby` 才进行类型检查。这一概念叫做 `动态类型`。    

在面向对象设计思想中，有这样一个重要原则:对`接口`编码，不对实现编码。

#### Ruby 与 正则表达式
##### 创建正则表达式
                        
* 将模式的定义放在两个正斜杠之间,返回一个`Regexp`对象 `reg1 = /^[a-z]*$/`        
* 创建一个`Regexp`对象 `reg2 = Regexp.new(‘^[a-z]*$’) `                   
* 使用前置的`%r` `reg3 = %r{^[a-z]*$}  `   

##### 匹配
匹配正则式: String和Regexp都支持以下两个方法
*  `match`方法: 匹配成功时返回`MatchData`类的一个实例；否则返回nil；
*  `=~` 操作符: 匹配成功,返回一个索引(integer)；否则,返回nil；


```Ruby
    puts( /abc/ =~ 'abc' )              #=>return 0
    puts( /abc/ =~ 'cdg' )              #=>return nil
    puts( /abc/.match('abc') )          #=>return abc
    puts( /abc/.match('cdg') )          #=>return nil
```


#### 联系1

##### `Ruby` 替换字符串的方法。
1，通过 正则

```Ruby
irb(main):005:0> string = "Hello Ruby."
=> "Hello Ruby."
irb(main):006:0> string.gsub(/Ruby/,'world')
=> "Hello world."


irb(main):025:0> string = "Hello Ruby."
=> "Hello Ruby."
irb(main):026:0> string.gsub(/(.)/,'<\1>')
=> "<H><e><l><l><o>< ><R><u><b><y><.>"


irb(main):001:0> string = "Hello Ruby."
=> "Hello Ruby."
irb(main):002:0>  string.gsub(/(\w)/,'<\1>')
=> "<H><e><l><l><o> <R><u><b><y>."
```

2,`replace`


```Ruby
irb(main):027:0> string = "Hello Ruby."
=> "Hello Ruby."
irb(main):028:0> string.replace("Yunis.")
=> "Yunis."
irb(main):029:0> puts string
Yunis.
=> nil
```

##### range


```Ruby
irb(main):030:0> rang1 = (1..10).to_a
=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
irb(main):031:0> range2 = ('bar'..'bat').to_a
=> ["bar", "bas", "bat"]




irb(main):046:0> (1..10).each{puts "Yunis"}
Yunis
Yunis
Yunis
Yunis
Yunis
Yunis
Yunis
Yunis
Yunis
Yunis
=> 1..10



irb(main):047:0> (1..10).each{|index| puts "Yunis #{index}"}
Yunis 1
Yunis 2
Yunis 3
Yunis 4
Yunis 5
Yunis 6
Yunis 7
Yunis 8
Yunis 9
Yunis 10
=> 1..10
```

##### 执行 Ruby 文件

```
$-> ruby /Users/Yunis/Desktop/First.rb
```

##### 正则匹配规则

| 规则 | 说明 |
| --- | --- |
|  `/a/`|匹配字符 a  |
| `/\?/` | 匹配特殊字符?。特殊字符包括^, $, ? , ., /, \, [, ], {, }, (, ), +, *. |
|  `.`| 匹配任意字符，例如/a./匹配ab和ac。   |
| `/[ab]c/` |  匹配ac和bc,[]之间代表范围,例如：/[a-z]/ , /[a-zA-Z0-9]/。|
|`/[^a-zA-Z0-9]/`  | 匹配不在该范围内的字符串 |
| `/[\d]/` | 	代表任意数字 |
|  `/[\w]/`| 代表任意字母，数字或者_ |
| `/[\s]/` | 代表空白字符，包括空格，TAB和换行 |
| `/[\D]/,/[\W]/,/[\S]/` |  均为上述的否定情况|
|  `?`| 代表0或1个字符 |
| `*` | 代表0或多个字符 |
| `+` |  代表1或多个字符|
| `/d{3}/` | 	匹配3个数字 |
|`/d{1,10}/`  | 匹配1-10个数字 |
| `d{3,}/` |  匹配3个数字以上|
| `/([A-Z]\d){5}/` | 匹配首位是大写字母，后面4个是数字的字符串 |


##### 猜数字的程序。


```Ruby
number = rand(10)


def testRuby(number1,number2)
    
    if (number1 > number2)
        puts "你输入的数字#{number1}大于随机数"
        inputNumber = gets().to_i
        testRuby(inputNumber,number2)
        
        elsif (number1 < number2)
        puts "你输入的数字#{number1}小于随机数"
        inputNumber = gets().to_i
        testRuby(inputNumber,number2)
        
        else
        puts "恭喜你猜对了。"
    end
    
end


puts "猜猜数字是多少？"
inputNumber = gets().to_i
testRuby(inputNumber,number)
```

#### 函数
##### 定义函数

```
irb(main):001:0> def rubyTest
irb(main):002:1> true
irb(main):003:1> end
=> :rubyTest
```
##### 数组

```
irb(main):015:0> aniamls = ["lions","tigers","bears"]
=> ["lions", "tigers", "bears"]
irb(main):016:0> aniamls[0]
=> "lions"
irb(main):017:0> aniamls[0..2]
=> ["lions", "tigers", "bears"]
irb(main):018:0> aniamls[-2]
=> "tigers"
```

Ruby 中数组 可以塞不同是数据类型。
##### 散列表
集合里面就是一个个用来存储对象的桶。在 散列表的桶里，每个对象上都贴着一张标识。这标识就是键，而对象就是键所对应的值。散列表就是一串这样的键值对。
##### 代码块和 yield
##### 定义类
##### 编写 Mixin
##### 模块、可枚举和集合





