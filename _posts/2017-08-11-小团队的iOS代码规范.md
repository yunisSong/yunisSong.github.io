---
layout:     post
title:      小团队的iOS代码规范
subtitle:   在不断填坑中前进。。
date:       2017-08-11
author:     三十一
header-img: img/post-bg-nextgen-web-pwa.jpg
header-mask: 0.3
catalog:    true
tags:
   - 
---
[TOC]
# 小团队的iOS代码规范

本文摘抄自<a font="24px">[iOS 代码规范](https://knightsj.github.io/2017/06/14/iOS%20%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/#more)</a>
### 1 变量
#### 1.1 变量名必须使用驼峰格式
类，协议使用大驼峰

```
HomePageViewController.h
<HeaderViewDelegate>
```
对象等局部变量使用小驼峰：

```
NSString *personName = @"";
NSUInteger totalCount = 0;
```
#### 1.2 变量的名称必须同时包含功能与类型


```
UIButton *addBtn //添加按钮
UILabel *nameLbl //名字标签
NSString *addressStr//地址字符串

```

#### 1.3 系统常用类作实例变量声明时加入后缀

| 类型 | 后缀 |
| --- | --- |
| UIViewController | VC |
| UIView | View |
| UILabel | Lbl |
| UIButton | Btn |
| UIImage | Img |
| UIImageView | ImagView |
| NSArray | Array |
| NSMutableArray|  Marray|
| NSDictionary  | Dict |
| NSMutableDictionary  | Mdict  |
| NSString | Str |
| NSMutableString| MStr |
| NSSet |  Set |
| NSMutableSet  | Mset |

### 2 常量
#### 2.1 常量应该以相关类名作为前缀
```
推荐：
static const NSTimeInterval ZOCSignInViewControllerFadeOutAnimationDuration = 0.4;
不推荐：
static const NSTimeInterval fadeOutTime = 0.4;
```
#### 2.2 建议使用类型常量，不建议使用#define预处理命令
首先比较一下这两种声明常量的区别：

    * 预处理命令：简单的文本替换，不包括类型信息，并且可被任意修改。
    * 类型常量：包括类型信息，并且可以设置其使用范围，而且不可被修改。

使用预处理虽然能达到替换文本的目的，但是本身还是有局限性的：

    * 不具备类型信息。
    * 可以被任意修改。
    

#### 2.3 对外公开某个常量

```
推荐：
//头文件
extern NSString *const ZOCCacheControllerDidClearCacheNotification;
//实现文件
static NSString * const ZOCCacheControllerDidClearCacheNotification = @"ZOCCacheControllerDidClearCacheNotification";
static const CGFloat ZOCImageThumbnailHeight = 50.0f;

不推荐：
#define CompanyName @"Apple Inc." 
#define magicNumber 42
```
### 3 宏
#### 3.1 宏、常量名都要使用大写字母，用下划线‘_’分割单词。

```
#define URL_GAIN_QUOTE_LIST @"/v1/quote/list"
#define URL_UPDATE_QUOTE_LIST @"/v1/quote/update"
#define URL_LOGIN  @"/v1/user/login”
```

#### 3.2 宏定义中如果包含表达式或变量，表达式和变量必须用小括号括起来。

```
#define MY_MIN(A, B)  ((A)>(B)?(B):(A))
```

### 4 范型

建议在定义NSArray和NSDictionary时使用泛型，可以保证程序的安全性,而且在使用 enum 函数式会自动识别 item 类型：

```
 NSArray<NSString *> *testArr = [NSArray arrayWithObjects:@"Hello", @"world", nil];
[testArr enumerateObjectsUsingBlock:^(NSString * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        
}];
NSDictionary<NSString *, NSNumber *> *dic = @{@"key":@(1), @"age":@(10)};
[dic enumerateKeysAndObjectsUsingBlock:^(NSString * _Nonnull key, NSNumber * _Nonnull obj, BOOL * _Nonnull stop) {
       
}];
```




