---
layout:     post
title:      Javascrpt高级程序设计(第3版)读书笔记01
subtitle:   在不断填坑中前进。。
date:       2017-05-10
author:     三十一
header-img: img/post-bg-js-version.jpg
header-mask: 0.3
catalog:    true
tags:
   - JavaScript
---

# Javascrpt高级程序设计(第3版)读书笔记01

### `script` 元素
向 `HTML` 页面加入 `JavaScript` 的主要方法，就是使用 `script` 。
包括6个属性：

1. `async` 可选。表示立即下载脚本，但不妨碍页面的其他操作，比如下载其他资源或者脚本。只对外部脚本文件有效。
2. `charset` 可选。 表示通过 `src` 属性指定的代码的字符集。由于大多数浏览器会忽略它的值，因此这个属性很少有人用。
3. `defer` 可选。表示脚本可以延迟到文档完全被解析和显示之后再执行。只对外部脚本有效。IE7 级更早的版本对嵌入脚本也支持这个属性。
4. `language` 已废弃。用来表示编写代码使用的脚本语言。（如JavaScript、VBScript）。
5. `src` 可选。表示包含要执行代码的外部文件。
6. `type` 可选。可以看成是 language 的替代属性。 表示编写代码使用脚本语言的类型（也称为MIME类型）。虽然 `text/javascript` 和 `text/ecmascript` 都已经不被推荐使用,但人们一直以来使用个还是 `text/javascript`。

使用 `script` 的方式有两种在：直接在页面中嵌入 `JavaScript` 代码和包含外部 `JavaScript` 文件。

包含在 `script` 内部的 `JavaScript` 的代码会被从上到下依次解释。浏览器会先解析完不使用 `defer` 的属性的 `script` 元素中的代码，然后再解析后面的内容，所以一般应该把 `script` 元素放在页面最后，即主要内容后面，`</body>`标签前面。
带有 `src` 属性的 `script` 标签会忽略 `script` 标签之间包含的 `JavaScript` 代码。

#### 应当尽量使用外部文件
虽然直接在 `script` 元素 中直接嵌入 `JavaScript` 代码没什么问题，但是一般认为最好的做法还是尽可能的使用外部文件来包含 `JavaScript` 代码，好处包括：

* 可维护性 避免 `HTML` 页面过于臃肿，同时把 `JavaScript` 文件放在一个文件夹下面，利于维护。
* 可缓存 浏览器能够根据具体的设置 缓存链接的所有外部 `JavaScript` 文件。也就是如果两个页面使用同一个文件，就无需再次下载。加快了页面的加载速度。
* 适应未来 通过外部文件来包含 `JavaScript` 无需使用 XHTML 或注释hack。
 


### `noscript` 元素
兼容早期不支持 `JavaScript` 的浏览器，这个元素可以包含能够出现在 `body` 的任何 `HTML` 元素 （`script` 除外），包含在 `noscript` 元素的内容会在下面两张情况显示：
* 浏览器不支持脚本；
* 浏览器支持脚本，但是脚本被禁止。

### 基本概念
#### 语法
##### 区分大小写
变量、函数名、操作符、语言中的一切，都区分大小写。
##### 标识符
标识符指的是变量、函数、属性的名字，或者函数的参数。有以下规则：
* 第一个字符必须是一个字母、下划线（_）或者一个美元符号（$）；
* 其他字符可以是字母、下划线、美元符号或者数字；
* 惯例是采用驼峰命名法。

##### 注释
// 单行注释
/* */ 多行注释

##### 严格模式
目前来说就是对一些不确定的行为进行处理、对某些不安全的操作抛出错误。 还不是很理解。启用的话 需要在函数体前面加入 `"use strict"`.
##### 语句
语句已一个分号结尾，如果没有分号，由编译器决定什么时间结尾。

##### 变量
`JavaScript` 中的变量是松散类型，就是可以用来保存任何类型的数据。换句话说，每个变量仅仅是一个用于保存值的占位符。未初始化的变量，会保存一个特殊值 `undefined`。变量在初始化后，可以改变变量的类型，虽然并不推荐，但是这样做是可以的。

#### 数据类型
`JavaScript` 中包括5种简单的数据类型 `Undefined`、`Null`、`Boolean`、`Number`、`String`。简单数据类型值无法被改变，每次赋值的时候，都是赋值一份新的值。还有一种复杂的数据类型 `Object`，`Object` 本质是有一组无序的键值对组成的。`JavaScript` 不支持任何创建自定义类型的机制，所有值的最终都将是上述6种数据类型之一。好像只有6种数据类型不能表示所有的数据，但是，由于 `JavaScript` 数据类型具有动态性，因此的确没有再定义其他数据类型的必要了。

##### typeof 操作符
typeof 是一个一元运算，放在一个运算数之前，运算数可以是任意类型。
它返回值是一个字符串，该字符串说明运算数的类型。

1. 对于数字类型的操作数而言， typeof 返回的值是 number。
2. 对于字符串类型， typeof 返回的值是 string。
3. 对于布尔类型， typeof 返回的值是 boolean 。
4. 对于对象、数组、null 返回的值是 object 。
5. 对于函数类型，返回的值是 function。
6. 如果运算数是没有定义的（比如说不存在的变量、函数或者undefined），将返回undefined。


##### Undefined 类型
`Undefined` 类型只有一个值，即特殊的 `undefined`， 一个没有被赋值的变量会有个默认值 `undefined`。

#####  Null 类型
`Null` 是第二个只有一个值的数据类型，这个特殊的值是 `null`。从逻辑角度来看， `null` 值表示一个空对象的指针，而这也正是使用 `typeof` 操作符检查 `null` 值时会返回 `object` 的原因。
如果一个变量准备保存对象，那么最好将该变量初始化为 null 而不是其他值。这样一来只需要检查 null 值就可以判断变量是否已经保存了一个对象的引用。

```
if (car != null){    //   car         }
```
undefined 值是派生自 null。因此比较 null 和 undefined 是返回值是 true。
##### Boolean 类型

`Boolean` 类型 只有两个字面值： `true` 和 `false`。


##### Number 类型
###### 浮点数值
浮点数值，就是数值中必须包含一个小数点，且小数点后面必须至少有以为数字。如果浮点数本身表示是一个整数（如1.0或者1.），会被转换为整数（1）。
对于那些极大或者极小的数，可以使用科学计数法表示：
> 3.125e7 表示31250000  计算方法为：3.125 * 10^7

###### 数值范围
Number.MIN_VALUE 表示最小数，一般为 5e-324，Number.MAX_VALUE 表示最大数,一般为1.7976931348623157e+308。如果超出这个范围，会被转换为 `Infinity`，将无法再参与计算。判断一个数值是个超出范围，可以使用 `isFinite()` 函数。

###### NaN

NaN,非数值的一个特殊的数值。这个数值用来表示本来要返回数值的操作数未返回数值的情况（这样做的好处是不会抛出错误）。
NaN 本身有两个特点：

* 任何涉及 NaN 的操作，都会返回 NaN，
* NaN 与任何值都不等，包括 NaN本身。判断是否是 NaN 需要使用 `isNaN()` 函数。    

###### 数值转换

有3个函数可以把非数值转换为数值：`Number() parseInt()  parseFloat()`。

`Number()` 转换有如下规则：

* 如果是 Boolean 值，true 和 false 分别转换为 1 和 0；
* 如果是数字值，只是简单的传入传出；
* 如果是 null，返回 0；
* 如果是 undefined ，返回 NaN；
* 如果是字符串，有以下规则：
    1. 如果字符串只包含数字，转换为十进制的数值。（"1" -> 1,"011"-> 11）
    2. 如果字符串中包含有效的浮点格式，转换为对应的浮点数值。
    3. 如果对象包含有效的十六进制格式，转换为相同大小的十进制整数值。("1.1" -> 1.1)
    4. 如果字符串是空的（不包含任何字符），转为 0；(""->0)
    5. 如果字符串中包含上述格式之外的字符，转换为 NaN。
* 如果是对象，调用对象的 valueOf()，然后依据前面的规则转换返回值。如果转换的结果是NaN，调用对象的 toString()方法，然后在依次调用前面的规则转换返回的字符串值。


`parseInt()` 函数：

* 忽略字符串前面的空格，直到找到第一非空格的字符。
* 如果第一个字符不是数字或者负号，返回NaN；
* 空字符串返回NaN
* 如果第一个字符就是数字，继续解析下面的字符，直到完全解析完或者遇到了非数字字符。

例子：

``` parseInt("1234blue"); //1234
parseInt(""); //NaN
parseInt("0xA"); //10 (16进制)
parseInt(22.5); //22
parseInt("070") //56(8进制)
parseInt("70"); //70
parseInt("0xf"); //15(16进制)
```


`parseFloat()` 函数：


```parseFloat("1234blue"); //1234
parseFloat("0xA"); //0
parseFloat("22.5"); //22.5
parseFloat("22.34.5"); //22.34
parseFloat("0908.5"); 908.5
parseFloat("3.125e7"); //31250000
```

##### String 类型

可以使用单引号和双引号来表示字符串，"hello" 和 'hello'都是正确的，但是不能使用一个单引号和一个双引号。

###### 字符字面量
String 数据类型包含一些特殊的字符字面量，也就转义序列，用于表示非打印字符，或者具有其他用途的字符。


```\n 换行
\t 制表
\b 空格
\r 回车
\f 换页 
\\ 斜杠
\' 单引号
\" 双引号
\xnn 16进制 n 为 （0 -F）例： \x41 表示为 A
\unnn 以16进制代码 nnnn 表示的 Unicode 字符，其中n 为 0 - F ，例如\u03a3 表示希腊字符Σ。

```
###### 字符串的特点
字符串的值类型，是不可变的。要改变某个变量保存的值，必须先销毁原来的字符串，然后创建新的字符串填充给变量。
###### 转换为字符串
要把一个值转换为字符串有两种方法：

* 第一种是几乎每个值都有的 `toString()` 方法。
* 在不知道要转换的值是不是 `null` 或 `undefined` 的情况下，还可以使用 `String()` ，这个函数可以将任何类型转换为字符串。`String()` 函数遵循以下规则：
    1. 如果值有 `toString()` 方法，使用 `toString()` 方法并返回响应结果；
    2. 如果值是 `null` ，则返回 "null";
    3. 如果值是 `undefined` ，则返回 "undefined"



例子：

```JavaScript
var age = 11;var ageAsString = age.toString(); //    "11" var found = true;var foundAsString = found.toString(); //    "true"


var num = 10;alert(num.toString());// "10"alert(num.toString(2));// "1010"alert(num.toString(8));// "12"alert(num.toString(10));// "10"alert(num.toString(16));// "a"
var value1 = 10;var value2 = true;var value3 = null;var value4;
alert(String(value1));// "10"alert(String(value2));// "true"alert(String(value3));// "null"alert(String(value4));// "undefined"
```

##### Object 类型

`ECMAScript` 中对象其实就是一组数据和功能的集合。对象可以通过执行 `new` 操作符后跟要创建的对象类型名称来创建。
`object` 的每一个实例都有如下方法。

* `constructor` 保存着用于创建当前对象的函数
* `hasOwnProperty(propertyName)` 用于检测 `propertyName` 是否在当前实例的属性中。
* `isPrototypeOf(object)` 用于检测传入的对象 `object` 是否是当前本对象的原型，表示指定的对象是否在本对象的原型链中。
* `propertyIsEnumerable(propertyName)` 判断指定属性是否可枚举，内部属性设置参见 ECMAScript DontEnum attribute 
* `toLocaleString()` 返回对象的字符串表示，该字符串与执行环境的地区对应。
* `toString()` 返回对象的字符串表示
* `valueOf()` 返回对象的字符串、数值、布尔值表示 。通常与 `toString()` 方法的返回值一致。

#### 函数
##### 理解参数
`JavaScript` 中函数的参数与其他大多数语言不同，`JavaScript` 函数不介意传递的参数有多少个，也不在乎传递过来的是什么类型。出现这样的原因是，`JavaScript` 中参数在内部通过数组来表示的。函数接收到的始终是一个数组，而不关心数组的个数、以及数组里面的数据类型。在函数体内部，可以使用 `arguments` 对象来访问参数数组。


```
function howManyArgs() {    alert(arguments.length);}howManyArgs("string", 45);  //2howManyArgs();              //0howManyArgs(12);            //1
```
##### 没有重载
`JavaScript` 没有传统意义的那样实现重载。
如果在 `JavaScript` 定义两个名字完全相同的函数，则改名字只属于后定义的函数。

```
function addSomeNumber(num){    return num + 100;}function addSomeNumber(num) {    return num + 200;}var result = addSomeNumber(100);//300
```


#### 小结

* `JavaScript` 中基本的数据类型包括 `Undefined`、`Null`、`Boolean`、`Number`、`String`。
* `JavaScript` 中没有区分 整数和浮点数，Number 用于表示所有数值。
* `JavaScript` 中的复杂数据类型 `Object` 类型，是这门语言中所有对象的基础类型。
* 严格模式为这门语言容易出错的地方加了限制。
* 无需指定函数的返回值，`JavaScript` 的函数可以在任何时间返回任何值。实际上未指定返回值的函数返回的是一个特殊的 `undefined` 值。
* `JavaScript` 也没有函数签名的概念，因为其函数参数是一个包含零个过多个值的数组形式传递的。
* 可以向 `JavaScript` 的函数传递任意数量的参数，可以通过 `arguments` 对象来访问参数。
* 由于不存在函数签名的特性，`JavaScript` 函数不能重载。


