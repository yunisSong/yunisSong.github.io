I"ş<h1 id="è¾“å…¥æ¡†åˆ‡æ¢é”®ç›˜å¡é¡¿çš„è§£å†³åŠæ³•">è¾“å…¥æ¡†åˆ‡æ¢é”®ç›˜å¡é¡¿çš„è§£å†³åŠæ³•</h1>

<p>ä»Šå¤©å¼€å‘ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ï¼š
æœ‰ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œä¸€ä¸ªè¾“å…¥æ‰‹æœºå·ç ã€ä¸€ä¸ªè¾“å…¥éªŒè¯ç ã€‚
å®¢æˆ·è¦æ±‚ï¼šæ‰‹æœºå·è¾“å…¥æ¡†è¾“å…¥æ»¡11ä½æ—¶ï¼Œåˆ‡æ¢åˆ°éªŒè¯ç è¾“å…¥æ¡†ã€‚</p>

<p>å¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œä¹Ÿå¾ˆå¥½è§£å†³,è§‚å¯Ÿè¾“å…¥æ¡†å†…å®¹çš„å˜åŒ–ï¼Œç„¶ååˆ‡æ¢é”®ç›˜å“åº”ï¼š</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">//ç›‘å¬ä½æ•°</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
            <span class="c1">//è¾“å…¥æ¡†å–æ¶ˆå“åº”</span>
            <span class="p">[</span><span class="n">field</span> <span class="nf">resignFirstResponder</span><span class="p">];</span>
            <span class="c1">//éªŒè¯ç è¾“å…¥æ¡† å“åº”é”®ç›˜</span>
            <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">codeField</span> <span class="nf">becomeFirstResponder</span><span class="p">];</span>

        <span class="p">});</span>
     <span class="p">}</span>
</code></pre></div></div>

<p>å¾ˆæ„‰å¿«çš„æäº¤äº†ä»£ç ï¼Œä½†æ˜¯æµ‹è¯•çš„å°ä¼™ä¼´å‘Šè¯‰æˆ‘ï¼Œé”®ç›˜åˆ‡æ¢çš„æ—¶é—´æœ‰å¡é¡¿ã€‚ï¼Ÿï¼Ÿï¼Ÿï¼Ÿä¸€è„¸æ‡µé€¼ï¼ï¼</p>

<p>è¿™ä¹Ÿä¼šå¡ï¼Ÿ</p>

<p>ç„¶åæƒ³åˆ°äº†æ˜¯ä¸æ˜¯å› ä¸ºåŠ¨ç”»å¼•èµ·çš„é—®é¢˜ï¼Ÿ
æ›´æ”¹å¦‚ä¸‹ï¼š</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">//ç›‘å¬ä½æ•°</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
            <span class="p">[</span><span class="n">UIView</span> <span class="nf">performWithoutAnimation</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
                <span class="c1">//è¾“å…¥æ¡†å–æ¶ˆå“åº”</span>
                <span class="p">[</span><span class="n">field</span> <span class="nf">resignFirstResponder</span><span class="p">];</span>
                <span class="c1">//éªŒè¯ç è¾“å…¥æ¡† å“åº”é”®ç›˜</span>
                <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">codeField</span> <span class="nf">becomeFirstResponder</span><span class="p">];</span>
            <span class="p">}];</span>
        <span class="p">});</span>
     <span class="p">}</span>
</code></pre></div></div>

<p>è¿˜æ˜¯ä¸è¡Œï¼Œæ˜¯åœ¨æ²¡æœ‰åŠæ³•äº†ï¼Œæœ€åæœç´¢åˆ°è¿™æ ·ä¸€ä¸ªç­”æ¡ˆï¼š
<a href="https://stackoverflow.com/questions/27098097/becomefirstresponder-not-working-in-ios-8?answertab=votes#tab-top">stackoverflow</a></p>

<blockquote>
  <p>A responder object only becomes the first responder if the current responder can resign first-responder status (canResignFirstResponder) and the new responder can become first responder.
You may call this method to make a responder object such as a view the first responder. However, you should only call it on that view if it is part of a view hierarchy. If the viewâ€™s window property holds a UIWindow object, it has been installed in a view hierarchy; if it returns nil, the view is detached from any hierarchy.</p>
</blockquote>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">txtAddNew</span> <span class="nf">performSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">becomeFirstResponder</span><span class="p">)</span> <span class="nf">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="n">afterDelay</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>
</code></pre></div></div>

<p>å¿ƒæƒ³è¿™æ ·æ€»å¯ä»¥äº†å§ã€‚</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="p">[</span><span class="n">field</span> <span class="nf">resignFirstResponder</span><span class="p">];</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">codeField</span> <span class="nf">performSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">becomeFirstResponder</span><span class="p">)</span> <span class="nf">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="n">afterDelay</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>

</code></pre></div></div>

<p>ã€‚ã€‚ã€‚
è¿˜æ˜¯ä¸è¡Œã€‚ã€‚</p>

<p>æœ€åæŠŠ    <code class="language-plaintext highlighter-rouge">[field resignFirstResponder];</code> è¿™æ ·ä»£ç æ³¨é‡Šæ‰æ‰å¯ä»¥ã€‚</p>

<p>æœ€ç»ˆç‰ˆæœ¬ï¼š</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1">//ç›‘å¬ä½æ•°</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//åˆ‡æ¢é”®ç›˜å“åº”</span>
        <span class="c1">//è§£å†³åˆ‡æ¢é”®ç›˜å¡é¡¿</span>
        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">codeField</span> <span class="nf">performSelector</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="n">becomeFirstResponder</span><span class="p">)</span> <span class="nf">withObject</span><span class="p">:</span><span class="nb">nil</span> <span class="n">afterDelay</span><span class="o">:</span><span class="mi">0</span><span class="p">];</span>
     <span class="p">}</span>
</code></pre></div></div>

<p>çŒœæµ‹åº”è¯¥æ˜¯é”®ç›˜æ‰€åœ¨çš„ <code class="language-plaintext highlighter-rouge">window</code> åˆ‡æ¢å¯¼è‡´çš„è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>å¦‚æœå…ˆå–æ¶ˆç¬¬ä¸€ä¸ªè¾“å…¥æ¡†çš„å“åº”ï¼Œå†è®©ç¬¬äºŒä¸ªè¾“å…¥æ¡†å“åº”ï¼Œ è¿™æ ·çš„è¯ä¼šå…ˆæŠŠå½“å‰é”®ç›˜æ‰€åœ¨çš„ <code class="language-plaintext highlighter-rouge">window</code> é”€æ¯ï¼Œç„¶ååˆ›å»ºæ–°çš„ <code class="language-plaintext highlighter-rouge">window</code>ï¼Œå°±ä¼šå¯¼è‡´å¡é¡¿ã€‚</p>

<p>å¦‚æœä¸å…ˆå–æ¶ˆç¬¬ä¸€ä¸ªé”®ç›˜çš„å“åº”ï¼Œå°±ä¸ä¼šé”€æ¯ window ä¹Ÿä¸ä¼šåˆ›å»ºæ–°çš„ window ï¼Œå°±ä¸ä¼šå¡é¡¿ã€‚æœ‰æ—¶é—´äº†å†™ä¸ª demo éªŒè¯ä¸‹ã€‚</p>

<p>å¥½å°´å°¬ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šæµ‹è¯•ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2017-07-08 17:45:07.888 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc841cd70
2017-07-08 17:45:07.888 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc85b2630
2017-07-08 17:45:07.889 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc847e910
2017-07-08 17:45:07.889 TestBecomeFirstResponder[14397:582182] 




2017-07-08 17:45:08.973 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc841cd70
2017-07-08 17:45:08.973 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc85b2630
2017-07-08 17:45:08.974 TestBecomeFirstResponder[14397:582182] çª—å£ = 0x7f8cc847e910
2017-07-08 17:45:08.974 TestBecomeFirstResponder[14397:582182] 
</code></pre></div></div>

<p>çª—å£éƒ½æ²¡æœ‰å˜åŒ–ã€‚ã€‚ã€‚è¿™è®©è€å¤«å¦‚ä½•æ˜¯å¥½ï¼</p>

:ET