I"—:<h1 id="pythonç¼–ç¨‹å¿«é€Ÿä¸Šæ‰‹--è®©ç¹çå·¥ä½œè‡ªåŠ¨åŒ–">Pythonç¼–ç¨‹å¿«é€Ÿä¸Šæ‰‹ â€” è®©ç¹çå·¥ä½œè‡ªåŠ¨åŒ–<ä¸‰></ä¸‰></h1>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">Pillow</code> æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ <code class="language-plaintext highlighter-rouge">Python</code> æ¨¡å—ï¼Œç”¨äº å¤„ç†å›¾åƒæ–‡ä»¶ã€‚è¯¥æ¨¡å—åŒ…å«ä¸€äº›å‡½æ•°ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°è£å‰ªå›¾åƒã€è°ƒæ•´å›¾åƒå¤§å°ï¼Œ
ä»¥åŠç¼–è¾‘å›¾åƒçš„å†…å®¹ã€‚</p>
</blockquote>

<h4 id="è·å–é¢œè‰²å€¼">è·å–é¢œè‰²å€¼</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageColor</span>
<span class="n">ImageColor</span><span class="p">.</span><span class="n">getcolor</span><span class="p">(</span><span class="s">'red'</span><span class="p">,</span> <span class="s">'RGBA'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="ç”¨-pillow-æ“ä½œå›¾åƒ">ç”¨ Pillow æ“ä½œå›¾åƒ</h3>

<p>åŠ è½½ä¸€å¼ å›¾ç‰‡åˆ° Python ç¯å¢ƒä¸­</p>

<p><img src="/media/15152393132842/zophie.png" alt="zophie" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="n">catIm</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">'zophie.png'</span><span class="p">)</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">catIm.size</code> è·å–å›¾ç‰‡å°ºå¯¸
<code class="language-plaintext highlighter-rouge">width, height = catIm.size</code></p>

<p><code class="language-plaintext highlighter-rouge">catIm.filename</code> å›¾ç‰‡åœ¨æœ¬åœ°çš„åç§°
<code class="language-plaintext highlighter-rouge">catIm.format</code> å’Œ <code class="language-plaintext highlighter-rouge">catIm.format_description</code> æ˜¯è·å–å›¾ç‰‡æ ¼å¼çš„å­—ç¬¦ä¸² <code class="language-plaintext highlighter-rouge">'PNG' 'Portable network graphics'</code> <code class="language-plaintext highlighter-rouge">format_description</code> æ¯”è¾ƒè¯¦ç»†ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">im = Image.new("RGBA",(100,200),"purple")</code> åˆ›å»ºä¸€ä¸ªå°ºå¯¸ä¸º 100*200ã€èƒŒæ™¯è‰²ä¸º purple çš„å›¾ç‰‡ã€‚</p>

<p><code class="language-plaintext highlighter-rouge">im2 = Image.new('RGBA', (20, 20))</code> åˆ›å»ºä¸€ä¸ªå°ºå¯¸ä¸º 20*20ã€èƒŒæ™¯é€æ˜ çš„å›¾ç‰‡ã€‚</p>

<h4 id="è£å‰ªå›¾ç‰‡">è£å‰ªå›¾ç‰‡</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">croppedIm</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">335</span><span class="p">,</span> <span class="mi">345</span><span class="p">,</span> <span class="mi">565</span><span class="p">,</span> <span class="mi">560</span><span class="p">))</span>
<span class="n">croppedIm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'cropped.png'</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="/media/15152393132842/cropped.png" alt="cropped" /></p>

<p>Image å¯¹ è±¡çš„ crop()æ–¹æ³•æ¥å—ä¸€ä¸ªçŸ©å½¢å…ƒç»„ï¼Œè¿”å›ä¸€ä¸ª Image å¯¹è±¡ï¼Œè¡¨ç¤ºè£å‰ªåçš„å›¾åƒã€‚è£å‰ª ä¸æ˜¯åœ¨åŸå›¾ä¸Šå‘ç”Ÿçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŸå§‹çš„ Image å¯¹è±¡åŸå°ä¸åŠ¨ï¼Œcrop()æ–¹æ³•è¿”å›ä¸€ ä¸ªæ–°çš„ Image å¯¹è±¡ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span><span class="n">è¯»å–æœ¬åœ°å›¾ç‰‡å»ºç«‹ä¸€ä¸ª</span> <span class="n">Imageå¯¹è±¡</span>
<span class="n">catIm</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">'zophie.png'</span><span class="p">)</span>
<span class="o">//</span><span class="n">æ‹·è´ä¸€ä»½</span>
<span class="n">catCopyIm</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">//</span><span class="n">å‰ªè£å‡ºä¸€ä»½</span>
<span class="n">faceIm</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">crop</span><span class="p">((</span><span class="mi">335</span><span class="p">,</span> <span class="mi">345</span><span class="p">,</span> <span class="mi">565</span><span class="p">,</span> <span class="mi">560</span><span class="p">))</span>
<span class="o">//</span><span class="n">æŠŠå‰ªè£å‡ºæ¥çš„å›¾ç‰‡ç²˜è´´åˆ°æ‹·è´å‡ºæ¥çš„å›¾ç‰‡ä¸Š</span><span class="err">ï¼Œ</span><span class="n">ä½ç½®ä¸º</span><span class="err">ï¼ˆ</span><span class="mi">0</span><span class="err">ï¼Œ</span><span class="mi">0</span><span class="err">ï¼‰</span>
<span class="n">catCopyIm</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="n">faceIm</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="o">//</span><span class="n">ä¿å­˜å›¾ç‰‡</span>
<span class="n">catCopyIm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'pasted.png'</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="/media/15152393132842/pasted.png" alt="pasted" /></p>

<h4 id="å¹³é“ºå›¾ç‰‡">å¹³é“ºå›¾ç‰‡</h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="n">catImWidth</span><span class="p">,</span> <span class="n">catImHeight</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">size</span>
 <span class="n">faceImWidth</span><span class="p">,</span> <span class="n">faceImHeight</span> <span class="o">=</span> <span class="n">faceIm</span><span class="p">.</span><span class="n">size</span>
 <span class="n">catCopyTwo</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">//</span><span class="n">å¹³é“º</span>
<span class="o">//</span><span class="mi">0</span><span class="p">,</span> <span class="n">catImWidth</span> <span class="n">èŒƒå›´å†…</span><span class="err">ï¼Œ</span><span class="n">faceImWidthä¸ºæ­¥é•¿</span>
 <span class="k">for</span> <span class="n">left</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">catImWidth</span><span class="p">,</span> <span class="n">faceImWidth</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">top</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">catImHeight</span><span class="p">,</span> <span class="n">faceImHeight</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">)</span>
        <span class="n">catCopyTwo</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="n">faceIm</span><span class="p">,</span> <span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">))</span>
        
 <span class="n">catCopyTwo</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'tiled.png'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/media/15152393132842/tiled.png" alt="tiled" /></p>

<h4 id="è°ƒæ•´å›¾ç‰‡å¤§å°">è°ƒæ•´å›¾ç‰‡å¤§å°</h4>

<p>resize()æ–¹æ³•åœ¨ Image å¯¹è±¡ä¸Šè°ƒç”¨ï¼Œè¿”å›æŒ‡å®šå®½åº¦å’Œé«˜åº¦çš„ä¸€ä¸ªæ–° Image å¯¹è±¡</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">size</span>
<span class="n">quartersizedIm</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">resize</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)))</span>
<span class="n">quartersizedIm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'quartersized.png'</span><span class="p">)</span>
<span class="n">svelteIm</span> <span class="o">=</span> <span class="n">catIm</span><span class="p">.</span><span class="n">resize</span><span class="p">((</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">+</span> <span class="mi">300</span><span class="p">))</span>
<span class="n">svelteIm</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'svelte.png'</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="/media/15152393132842/quartersized.png" alt="quartersized" /></p>

<h4 id="æ—‹è½¬å›¾ç‰‡">æ—‹è½¬å›¾ç‰‡</h4>

<p>å›¾åƒå¯ä»¥ç”¨ rotate()æ–¹æ³•æ—‹è½¬ï¼Œè¯¥æ–¹æ³•è¿”å›æ—‹è½¬åçš„æ–° Image å¯¹è±¡ï¼Œå¹¶ä¿æŒåŸå§‹ Image å¯¹è±¡ä¸å˜ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">catIm</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">90</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="s">'rotated90.png'</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="/media/15152393132842/rotated90.png" alt="rotated90" /></p>

<p>æ³¨æ„ï¼Œå½“å›¾åƒæ—‹è½¬ 90 åº¦æˆ– 270 åº¦æ—¶ï¼Œå®½åº¦å’Œé«˜åº¦ä¼šå˜åŒ–ã€‚å¦‚æœæ—‹è½¬å…¶ä»–è§’åº¦ï¼Œ å›¾åƒçš„åŸå§‹å°ºå¯¸ä¼šä¿æŒã€‚åœ¨ Windows ä¸Šï¼Œä½¿ç”¨é»‘è‰²çš„èƒŒæ™¯æ¥å¡«è¡¥æ—‹è½¬é€ æˆçš„ç¼éš™ï¼Œ å¦‚å›¾ 17-8 æ‰€ç¤ºã€‚åœ¨ OS X ä¸Šï¼Œä½¿ç”¨é€æ˜çš„åƒç´ æ¥å¡«è¡¥ç¼éš™ã€‚rotate()æ–¹æ³•æœ‰ä¸€ä¸ªå¯é€‰ çš„ expand å…³é”®å­—å‚æ•°ï¼Œå¦‚æœè®¾ç½®ä¸º Trueï¼Œå°±ä¼šæ”¾å¤§å›¾åƒçš„å°ºå¯¸ï¼Œä»¥é€‚åº”æ•´ä¸ªæ—‹è½¬ åçš„æ–°å›¾åƒã€‚</p>

<p>åˆ©ç”¨ transpose()æ–¹æ³•ï¼Œè¿˜å¯ä»¥å¾—åˆ°å›¾åƒçš„â€œé•œåƒç¿»è½¬â€ã€‚å¿…é¡»å‘ transpose()æ–¹æ³• ä¼ å…¥ Image.FLIP_LEFT_RIGHT æˆ– Image.FLIP_TOP_BOTTOMã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">catIm</span><span class="p">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="p">.</span><span class="n">FLIP_LEFT_RIGHT</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="s">'horizontal_flip.png'</span><span class="p">)</span>
<span class="n">catIm</span><span class="p">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">Image</span><span class="p">.</span><span class="n">FLIP_TOP_BOTTOM</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="s">'vertical_flip.png'</span><span class="p">)</span>
</code></pre></div></div>

<p><img src="/media/15152393132842/horizontal_flip.png" alt="horizontal_flip" /><img src="/media/15152393132842/vertical_flip.png" alt="vertical_flip" /></p>

<h4 id="æ›´æ”¹å•ä¸ªåƒç´ ">æ›´æ”¹å•ä¸ªåƒç´ </h4>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">//</span><span class="n">åˆ›å»ºä¸€ä¸ªé€æ˜å›¾ç‰‡</span> <span class="n">å¤§å°ä¸º</span> <span class="mi">100</span> <span class="o">*</span><span class="mi">100</span>
<span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'RGBA'</span><span class="p">,</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>

<span class="o">//</span><span class="n">å¡«å……é¢œè‰²</span> <span class="n">ä¸ºxè½´</span>  <span class="mi">0</span> <span class="o">-</span> <span class="mi">99</span> <span class="n">yè½´</span> <span class="mi">0</span><span class="o">-</span><span class="mi">49</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">):</span>
        <span class="n">im</span><span class="p">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="mi">210</span><span class="p">,</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">210</span><span class="p">))</span>

<span class="o">//</span><span class="n">å¡«å……é¢œè‰²</span> <span class="n">ä¸ºxè½´</span>  <span class="mi">0</span> <span class="o">-</span> <span class="mi">99</span> <span class="n">yè½´</span> <span class="mi">50</span><span class="o">-</span><span class="mi">99</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">im</span><span class="p">.</span><span class="n">putpixel</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">ImageColor</span><span class="p">.</span><span class="n">getcolor</span><span class="p">(</span><span class="s">'darkgray'</span><span class="p">,</span> <span class="s">'RGBA'</span><span class="p">))</span>

<span class="n">im</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">'putPixel.png'</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="/media/15152393132842/putPixel.png" alt="putPixe" /></p>

:ET