I"…"<h1 id="ios-11iphone-xxcode9é€‚é…">iOS 11ã€iPhone Xã€Xcode9é€‚é…</h1>

<p>é‡åˆ°çš„é—®é¢˜</p>

<h3 id="1-å¯åŠ¨å›¾å˜å½¢">1 å¯åŠ¨å›¾å˜å½¢ã€‚</h3>
<p><img src="/media/15059019605960/%E5%90%AF%E5%8A%A8%E5%9B%BE%E5%8F%98%E5%BD%A2.png" alt="å¯åŠ¨å›¾å˜å½¢" /></p>

<p>é¡¹ç›®é‡‡ç”¨çš„æ˜¯ <code class="language-plaintext highlighter-rouge">LaunchScreen.storyboard</code> å½“å¯åŠ¨è§†å›¾ï¼Œ<code class="language-plaintext highlighter-rouge">LaunchScreen.storyboard</code>é‡Œé¢åŠ è½½ä¸€ä¸ªå›¾ç‰‡å¡«å……äº†æ•´ä¸ªè§†å›¾ï¼Œç”±äºä¹‹å‰çš„ <code class="language-plaintext highlighter-rouge">iPhone</code> å®½é«˜æ¯”ä¾‹å·®åˆ«ä¸åˆ°ï¼Œä¹Ÿå°±æ²¡æœ‰æ³¨æ„åˆ°å›¾ç‰‡çš„å˜å½¢ï¼Œä»Šå¤© åœ¨ <code class="language-plaintext highlighter-rouge">iPhone X</code> ä¸Šå›¾ç‰‡å˜å½¢ä¸¥é‡ã€‚
è§£å†³æ–¹æ¡ˆï¼š</p>

<ol>
  <li>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">LaunchImage</code>ï¼Œä½†æ˜¯ç¾å·¥éœ€è¦åˆ‡å„ä¸ªä¸åŒ <code class="language-plaintext highlighter-rouge">iPhone</code> çš„å›¾ç‰‡ã€‚</li>
  <li>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">LaunchScreen.storyboard</code>ï¼Œé‡æ–°è®¾ç½® å›¾ç‰‡çš„çº¦æŸã€‚è®¾ç½®leftã€rightã€topä¸è§†å›¾ç›¸åŒï¼Œæ¯”ä¾‹è®¾ç½®ä¸ºåŸå›¾ç‰‡æ¯”ä¾‹ã€‚ç„¶åè§†å›¾èƒŒæ™¯è®¾ç½®ä¸ºä¸å›¾ç‰‡è¾¹æ¡†ç›¸åŒçš„èƒŒæ™¯ã€‚</li>
</ol>

<h3 id="2-å¯¼èˆªè§†å›¾ä¸Šç§»è¢«-åˆ˜æµ·é®æŒ¡">2 å¯¼èˆªè§†å›¾ä¸Šç§»ï¼Œè¢« åˆ˜æµ·é®æŒ¡</h3>

<p><img src="/media/15059019605960/15059020743807.jpg" alt="" />
<img src="/media/15059019605960/15059020905209.jpg" alt="" />
<img src="/media/15059019605960/15059021153942.jpg" alt="" /></p>

<p>æˆ‘ä»¬é¡¹ç›®ä¸­çš„å¯¼èˆªè§†å›¾éƒ½æ˜¯è‡ªå®šä¹‰çš„å¯¼èˆªè§†å›¾ï¼Œæ‰€ä»¥ä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜ã€‚
è¿™ä¸ªè§£å†³èµ·æ¥å°±ç®€å•ç²—æš´äº†ã€‚
åˆ¤æ–­ æ‰‹æœºå‹å·ï¼Œç„¶åé‡æ–°è®¾ç½®è§†å›¾é«˜åº¦ã€‚</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#import "UIDevice+SYHelp.h"
</span>
<span class="k">@implementation</span> <span class="nc">UIDevice</span> <span class="p">(</span><span class="nl">SYHelp</span><span class="p">)</span>
<span class="k">+</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isiPhoneX</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">UIScreen</span> <span class="nf">mainScreen</span><span class="p">].</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">==</span> <span class="mi">812</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>

<span class="p">}</span>
<span class="k">+</span> <span class="p">(</span><span class="n">BOOL</span><span class="p">)</span><span class="n">isiOS11</span>
<span class="p">{</span>
    <span class="n">NSString</span> <span class="o">*</span><span class="n">version</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="nf">currentDevice</span><span class="p">].</span><span class="n">systemVersion</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">version</span><span class="p">.</span><span class="n">floatValue</span> <span class="o">&gt;=</span> <span class="mi">11</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div></div>
<h3 id="3-mjrefresh-è§†å›¾ä¸éšè—">3 MJRefresh è§†å›¾ä¸éšè—</h3>
<p><img src="/media/15059019605960/15059023075980.jpg" alt="" /></p>

<p>è¿™ä¸ªè§£å†³æ–¹æ³•å°±æ˜¯åˆ¤æ–­æ‰‹æœºå‹å·å’Œç³»ç»Ÿç‰ˆæœ¬å·ï¼Œç„¶åè®©è§†å›¾ä¸Šç§»ã€‚</p>

<div class="language-objective_c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">BOOL</span> <span class="n">isIphoneX</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="nf">isiPhoneX</span><span class="p">];</span>
    <span class="n">BOOL</span> <span class="n">isiOS11</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIDevice</span> <span class="nf">isiOS11</span><span class="p">];</span>
    <span class="p">[</span><span class="n">mainScrollView</span> <span class="nf">mas_makeConstraints</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">MASConstraintMaker</span> <span class="o">*</span><span class="n">make</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isiOS11</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">make</span><span class="p">.</span><span class="n">left</span><span class="p">.</span><span class="n">right</span><span class="p">.</span><span class="n">bottom</span><span class="p">.</span><span class="n">equalTo</span><span class="p">(</span><span class="n">self</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">isIphoneX</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">make</span><span class="p">.</span><span class="n">top</span><span class="p">.</span><span class="n">equalTo</span><span class="p">(</span><span class="n">self</span><span class="p">).</span><span class="n">offset</span><span class="p">(</span><span class="o">-</span> <span class="mi">44</span><span class="p">);</span><span class="c1">//å…¼å®¹mj bug</span>
            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                <span class="n">make</span><span class="p">.</span><span class="n">top</span><span class="p">.</span><span class="n">equalTo</span><span class="p">(</span><span class="n">self</span><span class="p">).</span><span class="n">offset</span><span class="p">(</span><span class="o">-</span> <span class="mi">20</span><span class="p">);</span><span class="c1">//å…¼å®¹mj bug</span>
            <span class="p">}</span>
        <span class="p">}</span><span class="k">else</span>
        <span class="p">{</span>
            <span class="n">make</span><span class="p">.</span><span class="n">edges</span><span class="p">.</span><span class="n">equalTo</span><span class="p">(</span><span class="n">self</span><span class="p">);</span>

        <span class="p">}</span>
  
    <span class="p">}];</span>
</code></pre></div></div>
<p>æˆ–è€…ä¹Ÿå¯ä»¥ä½¿ç”¨æœ€æ–°ç‰ˆçš„ <code class="language-plaintext highlighter-rouge">MJRefresh</code> ä¹Ÿè®¸ä½œè€…å·²ç»é€‚é…äº† <code class="language-plaintext highlighter-rouge">iOS 11</code>ã€‚</p>

<h3 id="4-ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°é—ªé€€">4 ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°é—ªé€€</h3>

<p>iOS 11 å¦‚æœéœ€è¦ä¿å­˜å›¾ç‰‡åˆ°ç›¸ç‰‡åº“ä¸­ï¼Œéœ€è¦åœ¨ info.plist ä¸­å¢åŠ æ–°çš„å‚æ•° ï¼š<code class="language-plaintext highlighter-rouge">NSPhotoLibraryAddUsageDescription</code>,å¦åˆ™ä¿å­˜å›¾ç‰‡æ—¶ä¼šé—ªé€€ã€‚è‹¹æœå¯¹ç”¨æˆ·çš„éšç§æƒé™è¦æ±‚è¶Šæ¥è¶Šä¸¥æ ¼äº†ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This app has crashed because it attempted to access privacy-sensitive data without a usage description.  The app's Info.plist must contain an NSPhotoLibraryAddUsageDescription key with a string value explaining to the user how the app uses this data.
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;
    &lt;string&gt;æ˜¯å¦å…è®¸æ­¤Appä¸ºæ‚¨æ·»åŠ å›¾ç‰‡ï¼Ÿ&lt;/string&gt;
</code></pre></div></div>
<h3 id="xcode-9">Xcode 9</h3>

<p>ç›®å‰ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">Xcode 9</code> æ²¡æœ‰å‘ç°æœ‰ç‰¹æ®Šéœ€è¦ä¿®æ”¹çš„åœ°æ–¹ã€‚</p>

<p>ä½¿ç”¨åŠå¤©çš„æ„Ÿå—ï¼š</p>

<ol>
  <li>ä»£ç æç¤ºæ›´çƒ‚äº†ï¼Œæ„Ÿè§‰è¿˜ä¸å¦‚ 8ï¼Œæœ‰æ—¶å€™è¾“å…¥å›è½¦é”®ä¸ä¼šè‡ªåŠ¨å¡«å……å¤§æ‹¬å·äº†ã€‚</li>
  <li>ä½¿ç”¨èµ·æ¥ç•¥å¡ã€‚</li>
  <li>æ”¯æŒå¤šå¼€æ¨¡æ‹Ÿå™¨ï¼Œå®‰è£…app ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥æŠŠ <code class="language-plaintext highlighter-rouge">.app</code> æ–‡ä»¶æ‹–æ‹½å°±å¯ä»¥å®‰è£…ã€‚</li>
</ol>

<h3>â€“</h3>
<p>æ€»ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çš„é¡¹ç›®é€‚é…çš„å·¥ä½œé‡è¿˜æ˜¯å¾ˆå°çš„ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªä¸‹åˆæŠŠä¸¤ä¸ªå·¥ç¨‹çš„é€‚é…éƒ½åšå¥½äº†ï¼Œä¸»è¦æ˜¯æˆ‘ä»¬å·¥ç¨‹ä¸­å¤§é‡çš„é‡‡ç”¨ <code class="language-plaintext highlighter-rouge">H5</code> é¡µé¢ï¼Œé€‚é…çš„å·¥ä½œæ²¡æœ‰é‚£ä¹ˆå¤§ã€‚</p>

:ET